<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <title>反馈</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  body, button, textarea, h1 { margin: 0; -webkit-box-sizing: border-box; box-sizing: border-box; }
  body { padding: 0; font-size: 14px;}
	.form-fd { padding: 0 8px; }
  .fd-content { 
  	display: block; 
  	width: 100%; height: 250px; 
  	overflow: auto; 
  	border: 1px solid #aeaeae;
  	margin-bottom: 16px; padding: 6px 12px;
  	font-size: 14px; color: #b4b4b4; line-height: 1.5;
  	resize: none;
  }
	.hidden { display: none; }
	.header { height: 70px; background-color: #5caf19; padding-top: 1px; margin-bottom: 18px; }
	.header-title { color: #FFF; margin-top: 36px; text-align: center; font-weight: normal; font-size: 20px; }
	.btn {  
		display: block;
		-webkit-user-select: none;

	}
	.btn-fd {  
		width: 100%; line-height: 2;
		font-size: 16px; color: #5caf19;
		background-color: #FFF;
		border: 2px solid #5caf19;
	}
  </style>
</head>
<body>
<div class="header header-fd">
	<h1 class="header-title">用户反馈</h1>
</div>
<form id="j-form-fd" target="loadIframe" method="post" action="http://feedback.iqiyi.com/f/b/s.html" class="form-fd">
	<textarea name="content" id="fdcontent" rows="10" class="fd-content" placeholder="请留下您的宝贵意见"></textarea>
	<input type="hidden" name="player_version" value="1.0.0">
	<input type="hidden" name="fb_class" value="其他意见">
	<input type="hidden" name="entry_class" value="tv_assistant">
	<input type="hidden" name="ticket" value="" id="js-ticket-fd">

	<button type="button" id="j-btn-fd" class="btn btn-fd">提交</button>
</form>
<iframe src="" frameborder="0" class="hidden" id="j-loadIframe" name="loadIframe"></iframe>
<script>
	var $$ = function(id) { return document.getElementById(id.replace('#', '')); }
		, btnFd = $$('#j-btn-fd')
		, formFd = $$('#j-form-fd')
		, iframeWin = $$('#j-loadIframe').contentWindow
		, ticketId = null
		, getTicket = function(callback) {
			// 创建iframe获取数据，并读取解析内容
			// console.log($$('#j-ticket-fb'));
		}
	;
	// 为iframeWin定义函数，等待被执行
	iframeWin.frameElement.callback = function(res) {
		console.log(res);
	}
	// 当用户满足提交时, 用来手动提交表单的
	$$('#j-btn-fd').addEventListener('click', function() {
		// 检查文本是否满足要求

		// 成功请求ticket值后，并提交表单
		getTicket();
		console.log(iframeWin);
		formFd.submit();
	}, false);
</script>
</body>
</html>