<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Deferred</title>
	<script type="text/javascript" src="../../jquery-2.0.3.js"></script>
	<style>

	</style>
</head>
<body>
	<div id="output"></div>
	<script>
		var api = function() {
			var dfd = $.Deferred();
			var tasks = function() {
				var data = null;

				data ? dfd.resolve() : dfd.reject();
			};

			setTimeout(tasks, 2000);

			return dfd.promise();				// 返回defferrd.promise对象
		};
		$.when(api()).then(function(){
			alert('good work');
		}, function() {
			alert('not work');
		});
	</script>
</body>
</html>